@tailwind base;
@tailwind components;
@tailwind utilities;

/* Import accessibility styles */
@import './styles/accessibility.css';

/* Mobile-first responsive base styles */
@layer base {
  html {
    /* Use CSS custom property for mobile viewport height */
    height: calc(var(--vh, 1vh) * 100);
    /* Improve text rendering on mobile */
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
    /* Prevent horizontal scrolling */
    overflow-x: hidden;
    /* Smooth scrolling for better UX */
    scroll-behavior: smooth;
  }
  
  body {
    /* Mobile-first font sizing */
    font-size: 16px; /* Prevents zoom on iOS inputs */
    line-height: 1.5;
    /* Improve touch scrolling */
    -webkit-overflow-scrolling: touch;
    /* Prevent overscroll bounce */
    overscroll-behavior: none;
    /* Prevent text selection on mobile games */
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  /* Re-enable text selection for specific elements */
  input, textarea, [contenteditable] {
    -webkit-user-select: text;
    -moz-user-select: text;
    user-select: text;
  }
  
  /* Touch-friendly focus styles */
  button:focus,
  input:focus,
  select:focus,
  textarea:focus {
    outline: 2px solid #3b82f6;
    outline-offset: 2px;
  }
  
  /* Improve button touch targets on mobile */
  button {
    min-height: 44px; /* iOS minimum touch target */
    min-width: 44px;
    touch-action: manipulation; /* Prevents double-tap zoom */
    cursor: pointer;
  }
  
  /* Improve input touch targets on mobile */
  input,
  select,
  textarea {
    min-height: 44px;
    font-size: 16px; /* Prevents zoom on iOS */
    touch-action: manipulation;
  }
  
  /* Larger touch targets for mobile devices */
  @media (max-width: 768px) {
    button {
      min-height: 48px; /* Android minimum touch target */
      min-width: 48px;
      padding: 12px 16px;
    }
    
    input, select, textarea {
      min-height: 48px;
      padding: 12px 16px;
    }
    
    /* Increase tap target size for links */
    a {
      min-height: 44px;
      display: inline-flex;
      align-items: center;
      padding: 8px;
    }
  }
  
  /* Prevent text selection on game elements */
  .game-element {
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }
  
  /* Hide scrollbars but keep functionality */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
  
  /* Mobile-specific optimizations */
  @media (max-width: 768px) {
    /* Prevent zoom on double tap */
    * {
      touch-action: manipulation;
    }
    
    /* Optimize for mobile viewport */
    body {
      font-size: 18px; /* Slightly larger for mobile readability */
      line-height: 1.6;
    }
    
    /* Improve mobile scrolling performance */
    .scroll-container {
      -webkit-overflow-scrolling: touch;
      overflow-scrolling: touch;
    }
  }
  
  /* Landscape mobile optimizations */
  @media (max-width: 768px) and (orientation: landscape) {
    body {
      font-size: 16px; /* Smaller font in landscape to fit more content */
    }
    
    /* Reduce padding in landscape mode */
    .mobile-landscape-compact {
      padding: 8px !important;
    }
  }
}

/* Mobile-first component styles */
@layer components {
  /* Touch-friendly buttons - mobile first */
  .btn-touch {
    @apply min-h-[48px] min-w-[48px] px-4 py-3 rounded-lg font-medium transition-all duration-200;
    @apply focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50;
    @apply active:scale-95 transform cursor-pointer;
    @apply text-base; /* Mobile-first text size */
    touch-action: manipulation;
  }
  
  /* Larger buttons for mobile */
  .btn-touch-lg {
    @apply min-h-[56px] px-6 py-4 text-lg;
  }
  
  /* Extra large buttons for primary actions on mobile */
  .btn-touch-xl {
    @apply min-h-[64px] px-8 py-5 text-xl font-bold;
  }
  
  /* Desktop refinements */
  @media (min-width: 768px) {
    .btn-touch {
      @apply min-h-[44px] min-w-[44px] px-3 py-2 text-sm;
    }
    
    .btn-touch-lg {
      @apply min-h-[48px] px-4 py-3 text-base;
    }
    
    .btn-touch-xl {
      @apply min-h-[52px] px-6 py-4 text-lg;
    }
  }
  
  /* Mobile-optimized cards - mobile first */
  .card-mobile {
    @apply bg-white rounded-xl shadow-lg p-4 mx-2;
    @apply sm:p-6 sm:mx-4 md:p-8 md:mx-6; /* Progressive enhancement */
    @apply mb-4 sm:mb-6; /* Mobile-first spacing */
  }
  
  /* Touch-friendly form inputs - mobile first */
  .input-touch {
    @apply min-h-[48px] px-4 py-3 border-2 border-gray-300 rounded-lg;
    @apply focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50;
    @apply transition-all duration-200 text-base;
    font-size: 16px; /* Prevents zoom on iOS */
    touch-action: manipulation;
  }
  
  /* Desktop refinements for inputs */
  @media (min-width: 768px) {
    .input-touch {
      @apply min-h-[44px] text-sm;
    }
  }
  
  /* Mobile navigation - mobile first */
  .nav-mobile {
    @apply fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50;
    @apply flex justify-around items-center py-3;
    @apply safe-area-inset-bottom; /* Respect device safe areas */
    @apply shadow-lg; /* Better visual separation */
  }
  
  .nav-mobile-item {
    @apply flex flex-col items-center justify-center min-h-[56px] min-w-[56px];
    @apply text-xs font-medium text-gray-600 px-2;
    @apply active:bg-gray-100 rounded-lg transition-colors;
    @apply hover:bg-gray-50; /* Desktop hover state */
    touch-action: manipulation;
  }
  
  .nav-mobile-item.active {
    @apply text-blue-600 bg-blue-50;
  }
  
  /* Hide mobile nav on desktop */
  @media (min-width: 768px) {
    .nav-mobile {
      @apply hidden;
    }
  }
  
  /* Mobile-first grid layouts */
  .grid-mobile {
    @apply grid grid-cols-1 gap-3;
    @apply xs:grid-cols-2 xs:gap-4;
    @apply sm:grid-cols-2 sm:gap-4;
    @apply md:grid-cols-3 md:gap-5;
    @apply lg:grid-cols-4 lg:gap-6;
  }
  
  .grid-mobile-large {
    @apply grid grid-cols-1 gap-4;
    @apply sm:gap-6;
    @apply md:grid-cols-2 md:gap-6;
    @apply lg:grid-cols-3 lg:gap-8;
  }
  
  /* Mobile-optimized spacing - mobile first */
  .container-mobile {
    @apply px-3 py-2; /* Tighter mobile spacing */
    @apply xs:px-4 xs:py-3;
    @apply sm:px-6 sm:py-4;
    @apply md:px-8 md:py-6;
    @apply lg:px-12 lg:py-8;
  }
  
  /* Content spacing for mobile */
  .content-mobile {
    @apply space-y-3; /* Mobile-first content spacing */
    @apply sm:space-y-4;
    @apply md:space-y-6;
  }
  
  /* Swipe indicators */
  .swipe-indicator {
    @apply absolute z-50 pointer-events-none;
    @apply bg-black bg-opacity-50 text-white;
    @apply rounded-full w-12 h-12;
    @apply flex items-center justify-center;
    @apply text-xl font-bold;
    @apply transition-all duration-200;
  }
  
  /* Pull-to-refresh styles */
  .pull-refresh-container {
    @apply relative overflow-hidden;
  }
  
  .pull-refresh-indicator {
    @apply absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-full;
    @apply text-center p-2 text-sm text-gray-600;
    @apply transition-all duration-300;
  }
  
  /* Mobile landscape optimizations */
  @media (orientation: landscape) and (max-height: 500px) {
    .mobile-landscape-compact {
      @apply py-1;
    }
    
    .mobile-landscape-compact .card-mobile {
      @apply p-2 mb-2;
    }
    
    .mobile-landscape-compact .btn-touch {
      @apply py-2 min-h-[40px] text-sm;
    }
    
    .mobile-landscape-compact .btn-touch-lg {
      @apply py-2 min-h-[44px] text-base;
    }
    
    .mobile-landscape-compact .container-mobile {
      @apply px-2 py-1;
    }
    
    /* Reduce font sizes in landscape */
    .mobile-landscape-compact h1 {
      @apply text-xl;
    }
    
    .mobile-landscape-compact h2 {
      @apply text-lg;
    }
    
    .mobile-landscape-compact h3 {
      @apply text-base;
    }
  }
  
  /* Portrait mobile optimizations */
  @media (orientation: portrait) and (max-width: 768px) {
    .mobile-portrait-optimized {
      @apply space-y-4;
    }
    
    .mobile-portrait-optimized .btn-touch {
      @apply w-full; /* Full-width buttons in portrait */
    }
  }
  
  /* Safe area support for devices with notches */
  .safe-area-top {
    padding-top: env(safe-area-inset-top);
  }
  
  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  .safe-area-left {
    padding-left: env(safe-area-inset-left);
  }
  
  .safe-area-right {
    padding-right: env(safe-area-inset-right);
  }
  
  .safe-area-inset-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }
}

/* Mobile-first utility classes */
@layer utilities {
  /* Touch action utilities */
  .touch-pan-x {
    touch-action: pan-x;
  }
  
  .touch-pan-y {
    touch-action: pan-y;
  }
  
  .touch-manipulation {
    touch-action: manipulation;
  }
  
  .touch-none {
    touch-action: none;
  }
  
  /* Mobile-specific display utilities */
  .mobile-only {
    @apply block xs:hidden;
  }
  
  .mobile-sm-only {
    @apply block sm:hidden;
  }
  
  .tablet-only {
    @apply hidden sm:block lg:hidden;
  }
  
  .desktop-only {
    @apply hidden lg:block;
  }
  
  .tablet-up {
    @apply hidden sm:block;
  }
  
  .desktop-up {
    @apply hidden lg:block;
  }
  
  /* Mobile-first responsive visibility */
  .show-mobile {
    @apply block sm:hidden;
  }
  
  .show-tablet {
    @apply hidden sm:block lg:hidden;
  }
  
  .show-desktop {
    @apply hidden lg:block;
  }
  
  .hide-mobile {
    @apply hidden sm:block;
  }
  
  /* Mobile-optimized text sizes - mobile first */
  .text-mobile-xs {
    font-size: 0.875rem; /* Larger on mobile for readability */
    line-height: 1.3;
  }
  
  .text-mobile-sm {
    font-size: 1rem;
    line-height: 1.4;
  }
  
  .text-mobile-base {
    font-size: 1.125rem; /* Larger base size for mobile */
    line-height: 1.5;
  }
  
  .text-mobile-lg {
    font-size: 1.25rem;
    line-height: 1.5;
  }
  
  .text-mobile-xl {
    font-size: 1.5rem;
    line-height: 1.4;
  }
  
  /* Desktop text size adjustments */
  @media (min-width: 768px) {
    .text-mobile-xs {
      font-size: 0.75rem;
      line-height: 1.2;
    }
    
    .text-mobile-sm {
      font-size: 0.875rem;
      line-height: 1.3;
    }
    
    .text-mobile-base {
      font-size: 1rem;
      line-height: 1.4;
    }
    
    .text-mobile-lg {
      font-size: 1.125rem;
      line-height: 1.4;
    }
    
    .text-mobile-xl {
      font-size: 1.25rem;
      line-height: 1.4;
    }
  }
  
  /* Aspect ratio utilities for mobile */
  .aspect-mobile-card {
    aspect-ratio: 4/3;
  }
  
  .aspect-mobile-wide {
    aspect-ratio: 16/9;
  }
  
  /* Mobile-friendly hover states (only on devices that support hover) */
  @media (hover: hover) {
    .hover-mobile:hover {
      @apply bg-gray-50;
    }
    
    .hover-mobile-scale:hover {
      @apply scale-105;
    }
    
    .hover-mobile-lift:hover {
      @apply -translate-y-1 shadow-lg;
    }
  }
  
  /* Touch feedback for mobile devices */
  .touch-feedback:active {
    @apply scale-95 bg-gray-100;
    transition: all 0.1s ease-in-out;
  }
  
  /* Prevent zoom on double tap */
  .no-zoom {
    touch-action: manipulation;
  }
  
  /* Mobile-optimized shadows */
  .shadow-mobile {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }
  
  .shadow-mobile-lg {
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
  }
  
  .shadow-mobile-xl {
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
  }
  
  /* Mobile-specific spacing utilities */
  .space-mobile-tight > * + * {
    margin-top: 0.5rem;
  }
  
  .space-mobile-normal > * + * {
    margin-top: 1rem;
  }
  
  .space-mobile-loose > * + * {
    margin-top: 1.5rem;
  }
  
  /* Mobile-optimized padding */
  .p-mobile {
    @apply p-3 sm:p-4 md:p-6;
  }
  
  .px-mobile {
    @apply px-3 sm:px-4 md:px-6;
  }
  
  .py-mobile {
    @apply py-3 sm:py-4 md:py-6;
  }
  
  /* Mobile-safe margins */
  .m-mobile {
    @apply m-2 sm:m-3 md:m-4;
  }
  
  .mx-mobile {
    @apply mx-2 sm:mx-3 md:mx-4;
  }
  
  .my-mobile {
    @apply my-2 sm:my-3 md:my-4;
  }
}

/* Animation System for Emmy's Learning Adventure */

/* Success Animations */
@keyframes correct-bounce {
  0% { transform: scale(1); }
  25% { transform: scale(1.1) rotate(2deg); }
  50% { transform: scale(1.2) rotate(-2deg); }
  75% { transform: scale(1.1) rotate(1deg); }
  100% { transform: scale(1) rotate(0deg); }
}

@keyframes celebration-pulse {
  0% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.3); opacity: 0.8; }
  100% { transform: scale(1); opacity: 1; }
}

@keyframes success-glow {
  0% { box-shadow: 0 0 5px rgba(34, 197, 94, 0.5); }
  50% { box-shadow: 0 0 20px rgba(34, 197, 94, 0.8), 0 0 30px rgba(34, 197, 94, 0.6); }
  100% { box-shadow: 0 0 5px rgba(34, 197, 94, 0.5); }
}

@keyframes star-twinkle {
  0%, 100% { opacity: 0.3; transform: scale(0.8) rotate(0deg); }
  50% { opacity: 1; transform: scale(1.2) rotate(180deg); }
}

/* Error Animations */
@keyframes incorrect-shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-8px); }
  20%, 40%, 60%, 80% { transform: translateX(8px); }
}

@keyframes error-flash {
  0% { background-color: transparent; }
  50% { background-color: rgba(239, 68, 68, 0.2); }
  100% { background-color: transparent; }
}

@keyframes wobble {
  0% { transform: rotate(0deg); }
  15% { transform: rotate(-5deg); }
  30% { transform: rotate(3deg); }
  45% { transform: rotate(-3deg); }
  60% { transform: rotate(2deg); }
  75% { transform: rotate(-1deg); }
  100% { transform: rotate(0deg); }
}

/* Completion Celebrations */
@keyframes confetti-fall {
  0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
  100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
}

@keyframes trophy-bounce {
  0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
  40% { transform: translateY(-20px); }
  60% { transform: translateY(-10px); }
}

@keyframes rainbow-text {
  0% { color: #ef4444; }
  16.66% { color: #f97316; }
  33.33% { color: #eab308; }
  50% { color: #22c55e; }
  66.66% { color: #3b82f6; }
  83.33% { color: #8b5cf6; }
  100% { color: #ef4444; }
}

/* Button and Interactive Animations */
@keyframes button-press {
  0% { transform: scale(1); }
  50% { transform: scale(0.95); }
  100% { transform: scale(1); }
}

@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
}

@keyframes gentle-bounce {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-5px); }
}

/* Loading and Transition Animations */
@keyframes fade-in-up {
  0% { opacity: 0; transform: translateY(20px); }
  100% { opacity: 1; transform: translateY(0); }
}

@keyframes slide-in-right {
  0% { opacity: 0; transform: translateX(30px); }
  100% { opacity: 1; transform: translateX(0); }
}

@keyframes zoom-in {
  0% { opacity: 0; transform: scale(0.8); }
  100% { opacity: 1; transform: scale(1); }
}

/* Animation Classes */
.correct-bounce {
  animation: correct-bounce 0.6s ease-in-out, success-glow 0.6s ease-in-out;
}

.incorrect-shake {
  animation: incorrect-shake 0.6s ease-in-out, error-flash 0.6s ease-in-out;
}

.celebration-pulse {
  animation: celebration-pulse 1s ease-in-out infinite;
}

.trophy-bounce {
  animation: trophy-bounce 2s ease-in-out infinite;
}

.confetti-particle {
  animation: confetti-fall 3s linear infinite;
}

.star-twinkle {
  animation: star-twinkle 2s ease-in-out infinite;
}

.rainbow-text {
  animation: rainbow-text 2s linear infinite;
}

.button-press {
  animation: button-press 0.2s ease-in-out;
}

.float {
  animation: float 3s ease-in-out infinite;
}

.gentle-bounce {
  animation: gentle-bounce 2s ease-in-out infinite;
}

.fade-in-up {
  animation: fade-in-up 0.5s ease-out;
}

.slide-in-right {
  animation: slide-in-right 0.5s ease-out;
}

.zoom-in {
  animation: zoom-in 0.3s ease-out;
}

.wobble {
  animation: wobble 0.8s ease-in-out;
}

/* Hover Effects */
.hover-lift {
  transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
}

.hover-lift:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.hover-glow {
  transition: box-shadow 0.3s ease-in-out;
}

.hover-glow:hover {
  box-shadow: 0 0 20px rgba(139, 92, 246, 0.4);
}

/* Utility Classes for Animation Control */
.animate-delay-100 { animation-delay: 0.1s; }
.animate-delay-200 { animation-delay: 0.2s; }
.animate-delay-300 { animation-delay: 0.3s; }
.animate-delay-500 { animation-delay: 0.5s; }

.animate-duration-fast { animation-duration: 0.3s; }
.animate-duration-normal { animation-duration: 0.5s; }
.animate-duration-slow { animation-duration: 1s; }

/* Achievement System Animations */
@keyframes achievement-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(139, 92, 246, 0.3); }
  50% { box-shadow: 0 0 40px rgba(139, 92, 246, 0.6), 0 0 60px rgba(139, 92, 246, 0.4); }
}

@keyframes badge-unlock {
  0% { transform: scale(0) rotate(-180deg); opacity: 0; }
  50% { transform: scale(1.2) rotate(0deg); opacity: 1; }
  100% { transform: scale(1) rotate(0deg); opacity: 1; }
}

@keyframes sparkle-burst {
  0% { transform: scale(0) rotate(0deg); opacity: 1; }
  50% { transform: scale(1.5) rotate(180deg); opacity: 0.8; }
  100% { transform: scale(0.8) rotate(360deg); opacity: 0; }
}

@keyframes achievement-slide-in {
  0% { transform: translateY(-100px) scale(0.8); opacity: 0; }
  50% { transform: translateY(10px) scale(1.05); opacity: 1; }
  100% { transform: translateY(0) scale(1); opacity: 1; }
}

@keyframes rarity-pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

@keyframes legendary-shine {
  0% { background-position: -200% center; }
  100% { background-position: 200% center; }
}

/* Achievement Animation Classes */
.achievement-glow {
  animation: achievement-glow 2s ease-in-out infinite;
}

.badge-unlock {
  animation: badge-unlock 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.sparkle-burst {
  animation: sparkle-burst 1.5s ease-out;
}

.achievement-slide-in {
  animation: achievement-slide-in 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.rarity-pulse {
  animation: rarity-pulse 2s ease-in-out infinite;
}

.legendary-shine {
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
  background-size: 200% 100%;
  animation: legendary-shine 2s ease-in-out infinite;
}

/* Achievement Card Hover Effects */
.achievement-card {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.achievement-card:hover {
  transform: translateY(-4px) scale(1.02);
}

.achievement-card.earned {
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
}

.achievement-card.earned:hover {
  box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
}

/* Progress Bar Animations */
@keyframes progress-fill {
  0% { width: 0%; }
  100% { width: var(--progress-width); }
}

.progress-fill {
  animation: progress-fill 1s ease-out;
}

/* Notification Queue Indicator */
@keyframes queue-pulse {
  0%, 100% { opacity: 0.6; transform: scale(1); }
  50% { opacity: 1; transform: scale(1.1); }
}

.queue-pulse {
  animation: queue-pulse 1.5s ease-in-out infinite;
}

/* Reduced Motion Support */
@media (prefers-reduced-motion: reduce) {
  .correct-bounce,
  .incorrect-shake,
  .celebration-pulse,
  .trophy-bounce,
  .confetti-particle,
  .star-twinkle,
  .rainbow-text,
  .float,
  .gentle-bounce,
  .achievement-glow,
  .badge-unlock,
  .sparkle-burst,
  .achievement-slide-in,
  .rarity-pulse,
  .legendary-shine,
  .progress-fill,
  .queue-pulse {
    animation: none;
  }
  
  .hover-lift:hover,
  .achievement-card:hover {
    transform: none;
  }
}

